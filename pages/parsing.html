<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="#" type="image/x-icon">
  <title>JS</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
<a href="https://www.freshworks.com/saas/eng-blogs/an-introduction-into-ast-tooling-blog/">
  An introduction into AST tooling What is AST?
</a>
<a href="/index.html" class="home__btn--absolut">home</a>
<p>
  Когда JavaScript-код загружается в браузер или другую среду выполнения, он проходит через несколько этапов, прежде чем фактически будет выполнен. Один из ключевых этапов — это фаза компиляции (или более точно, интерпретации и подготовки), во время которой движок JavaScript обрабатывает код. Важной частью этого процесса является создание контекста выполнения и подготовка памяти для переменных и функций. Вот основные шаги этого процесса:
1. Фаза разбора (Parsing)

Во время разбора исходный код JavaScript преобразуется в более понятную для движка форму — обычно в абстрактное синтаксическое дерево (AST). Это дерево представляет структурные и синтаксические связи кода.
2. Фаза компиляции/интерпретации

Движок анализирует AST и переходит к созданию контекстов выполнения для глобального кода и функций. В этой фазе происходит важный процесс, известный как "Hoisting" или "поднятие".

Hoisting (поднятие)

    Для переменных: переменные, объявленные через var, поднимаются в начало своего контекста выполнения (функции или глобального пространства) только с их объявлением, без инициализации. То есть, до того как код начнет выполняться, движок "знает" о существовании этих переменных, но их значения до первой инициализации будут undefined.
    Для функций: объявления функций поднимаются полностью, включая определение функции. Это значит, что функции можно вызывать даже до того, как они объявлены в коде.

3. Создание контекста выполнения

Каждый раз, когда вызывается функция, для неё создаётся новый контекст выполнения. В этот контекст входят:

    Environment Record (запись окружения), который хранит все локальные переменные, параметры функции, и функции.
    Outer Environment Reference (ссылка на внешнее окружение), которая указывает на окружение, в котором была создана функция, позволяя реализовать замыкания.

4. Выполнение кода

После подготовки и размещения всех переменных и функций в памяти начинается фактическое выполнение кода. В это время значения присваиваются переменным, вызываются функции и т.д.
Замечания по let и const

С ES6 появились let и const, которые также подвергаются hoisting, но ведут себя иначе, чем var. Они остаются в "temporal dead zone" (временно мертвой зоне) до тех пор, пока не достигнут их объявления в коде, что делает их недоступными до инициализации.

Этот процесс обеспечивает эффективное управление памятью и выполнение, позволяя JavaScript динамически работать в различных средах, включая браузеры и серверные платформы.

</p>

</body>
</html>